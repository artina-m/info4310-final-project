<html>

<head>
  <title>INFO 4310 Final Project</title>
  <link rel="stylesheet" type="text/css" href="style.css">

  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="fisheye.js"></script>
  <script src="helpers.js"></script>
  <script src="plots.js"></script>
</head>

<body>
  <div class="spaceView1">

    <div class="sideBar">

      <p class="sectionTitle"> STUFF IN SPACE </p>
      <p class="sectionDesc">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
        Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis
        aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
      </p>

      <!-- Add buttons -->
      <br>
        

        

      <br>
      *Wait for all the satellites to load, the hit sat type* Click start to restart
      <button onclick="start()">Start</button>

      <button onclick="filterByType()">Satellite Types</button>



    </div>

    <div class="rightHand">
        <div class = "search">
        <input type="text" id="myInput" onkeyup="searchFunction()" placeholder="Search for Satellites"></div>
      
        <div class = "visualization"></div>
    </div>
      
  </div>

  </div>
  <div class="testViewPort">

  </div>
  <div class="useByCountryView">
    <p class="useDesc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
      Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute
      irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
    <p class="useDesc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
      Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute
      irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
    <div class="useViz">

    </div>
    <div class="useVizBody">
      <p class="useTitle">SATELLITE USE CASE BY COUNTRY</p>
      <p class="useDesc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna
        aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
    </div>
  </div>
</body>


<script>
  let satData;
  let flatData;
  let colorTheme = "#010305"
  // Center orbits
  const centerX = 460;
  const centerY = 380;
    // Radius for orbit levels
    const leo = 100;
    const meo = 260;
    const geo = 320;
    const alignX = 920;

  //let spaceSVG; // declare variable for svg for orbits/satelltes
  let cartogramSVG; // declare variable for plotting cartogram svg.
    
  const rscale = d3.scaleLinear()
                .domain([0,6651])
                .range([1.5,15])


  // Load data
  function parseLine(line) {
        // Return only the columns we are interested in
        // Subject to revision!

        // Create new Date object so dates are not distorted
        let split_date = line["Date of Launch"].split("/");
        let year;
        if (split_date[2] < 20) {
          year = '20' + split_date[2];
        } else {
          year = '19' + split_date[2];
        }
        let temp_date = new Date(year, split_date[0], split_date[1]);

        return {
            satName: line["Name of Satellite, Alternate Names"],
            launchDate: temp_date,
            year: Number(year),
            month: Number(split_date[0]),
            day: Number(split_date[1]),
            country: line["Country of Operator/Owner"],
            users: line["Users"],
            purpose: line["Purpose"],
            detailedPurpose: line["Detailed Purpose"],
            orbitClass: line["Class of Orbit"],
            orbitType: line["Type of Orbit"],
            expectedLifetime: line["Expected Lifetime"],
            launchMass: Number(line["Launch Mass (kg.)"])
        }

    }
  

  plot_orbits("visualization");


  let start = function () {
     spaceSVG.select(".world").remove()
    let world = spaceSVG
        .append("image")
        .attr("xlink:href", "worlmapblue.png")
        .attr("class", "world")
        .attr("y", centerY - 40)
        .attr("x", centerX - 40)
        .attr("width", 80);

    spaceSVG.selectAll("g").selectAll("circle").remove();
    spaceSVG.selectAll(".factText").remove();
    spaceSVG.selectAll("line").remove();
      
    spaceSVG.append("text")
    .text("1738")
    .attr("x", alignX).attr("y", 50)
    .attr("class","factText")
    .style("font-size", 24).attr("fill", "white")

    spaceSVG.append("text")
    .text("Active orbiting satillites")
    .attr("x", alignX).attr("y", 70)
    .attr("class","factText")
    .style("font-size", 16)
    .attr("fill", "white")

    spaceSVG.append("line")
    .attr("x1", alignX).attr("x2", alignX +200)
    .attr("y1", 90).attr("y2", 90)
    .attr("class", "factText")
    .attr("stroke", "lightgrey").attr("stroke-width", 0.5)

    d3.csv("UCS_Satellite_Database.csv", parseLine, function (error, data) {
      satData = data;
      useCase = useCaseProportion(satData)

      d3.csv("use.csv", function (error, data2) {
        flatData = data2;
        plot_use("useViz", flatData);
      });

      satData.forEach(function (d) {
        setTimeout(function () { plot_satellites(d) }, 100)
      });
    
    });
  };

  start();

</script>

<!-- References -->
<!-- Data:  https://www.ucsusa.org/nuclear-weapons/space-weapons/satellite-database#.WqwEapPwZE4 -->

</html>