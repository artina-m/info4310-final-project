<html>

<head>
    <title>INFO 4310 Final Project</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="plots.js"></script>
    <script src="helpers.js"></script>
    <link rel = "stylesheet" type="text/css" href = "style.css">
</head>

<body>

  <div class = "tempContainer"> </div>

</body>


<!-- References -->

<!-- Data:  https://www.ucsusa.org/nuclear-weapons/space-weapons/satellite-database#.WqwEapPwZE4 -->
<script>
  let spaceSVG;
  const centerPoint = 300;
  let satData;

  // Load data
 function parseLine(line) {
    // Return only the columns we are interested in
    // Subject to revision!

    // Create new Date object so dates are not distorted
    let split_date = line["Date of Launch"].split("/");
    let year;
    if (split_date[2] < 20) {
      year = '20' + split_date[2];
    } else {
      year = '19' + split_date[2];
    }
    let temp_date = new Date(year, split_date[0], split_date[1]);

    return {
        satName: line["Name of Satellite, Alternate Names"],
        launchDate: temp_date,
        year: Number(year),
        month: Number(split_date[0]),
        day: Number(split_date[1]),
        country: line["Country of Operator/Owner"],
        users: line["Users"],
        purpose: line["Purpose"],
        detailedPurpose: line["Detailed Purpose"],
        orbitClass: line["Class of Orbit"],
        orbitType: line["Type of Orbit"],
        expectedLifetime: line["Expected Lifetime"]
    }
}


  plot_orbits("tempContainer");


  d3.csv("UCS_Satellite_Database.csv", parseLine, function(error, data){
      satData = data;




      satData.forEach(function(d){
          // Randomly scatter the satellities into different orbit classes

          // Elliptical: 39
          // GEO: 531
          // MEO: 97
          // LEO: 1,071
          color = "white"
          if (d.users.indexOf("Civil") > -1) {
              color =  "yellow"}
          if (d.users.indexOf("Military") > -1) {
              color =  "red"}

           if (d.users.indexOf("Commercial") > -1) {
               color =  "blue"}

          if (d.users.indexOf("Government") > -1) {
              color =  "white"}


          if (d.orbitClass == "LEO"){
              radius = 100 + (Math.random() * 20)
              angle = Math.random()  * (2*Math.PI)

              spaceSVG.append("circle")
                  .attr("cx", radius * Math.cos(angle) + centerPoint)
                  .attr("cy", radius * Math.sin(angle) + centerPoint)
                  .attr("r", 1)
                  .attr("fill", color)
          }
          else if (d.orbitClass == "MEO"){
              radius = 150 + (Math.random() * 20)
              angle = Math.random()  * (2*Math.PI)

              spaceSVG.append("circle")
                  .attr("cx", radius * Math.cos(angle) + centerPoint)
                  .attr("cy", radius * Math.sin(angle) + centerPoint)
                  .attr("r", 1)
                  .attr("fill", color)
          }
          else if (d.orbitClass == "GEO"){
              radius = 250 + (Math.random() * 20)
              angle = Math.random()  * (2*Math.PI)

              spaceSVG.append("circle")
                  .attr("cx", radius * Math.cos(angle) + centerPoint)
                  .attr("cy", radius * Math.sin(angle) + centerPoint)
                  .attr("r", 1)
                  .attr("fill", color)
          }
      })

  });

    // End of d3.csv


</script>

</html>
